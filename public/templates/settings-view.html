<div class="{{containerClass}}">
    <div class="settings-header">
        <h1 class="{{titleClass}}">‚öôÔ∏è Settings</h1>
        <button class="{{buttonClass}} log-view-btn" id="show-log-btn">üìú Log</button>
    </div>

    <div class="{{sectionClass}}">
        <h2>Player Information</h2>
        <div class="{{fieldClass}}">
            <label for="player-name-input">Player Name:</label>
            <input type="text" id="player-name-input" value="{{playerName}}" placeholder="Enter your player name" />
        </div>
        <div class="{{fieldClass}}">
            <label>Peer ID:</label>
            <span id="peer-id-display" class="peer-id-readonly">{{peerId}}</span>
        </div>
    </div>

    <div class="{{sectionClass}}">
        <h2>Private Notes</h2>
        <div class="{{fieldClass}}">
            <label for="private-notes-editor">Notes (not shared with other players):</label>
            <div id="private-notes-editor" class="milkdown-editor"></div>
        </div>
    </div>

    <div class="{{sectionClass}}">
        <h2>Friends List</h2>
        <div id="friends-list">
            {{#each friends}}
            <div class="friend-card" data-friend-id="{{id}}">
                <div class="friend-info">
                    <div class="friend-field">
                        <label>Player Name:</label>
                        <input type="text" class="friend-name-input" data-friend-id="{{id}}" value="{{playerName}}" />
                    </div>
                    <div class="friend-field">
                        <label>Peer ID:</label>
                        <span class="friend-peer-id">{{peerId}}</span>
                    </div>
                </div>
                <div class="friend-notes-section">
                    <label>Private Notes:</label>
                    <div class="milkdown-editor" id="friend-notes-{{id}}"></div>
                </div>
                <button class="remove-friend-btn" data-friend-id="{{id}}">Remove</button>
            </div>
            {{/each}}
        </div>
        <div class="friend-actions">
            <button class="{{buttonClass}}" id="invite-friend-btn">Invite Friend</button>
            <button class="{{buttonClass}}" id="accept-invitation-btn">Accept Invitation</button>
        </div>
    </div>

    <div class="settings-actions">
        <button class="{{backButtonClass}}">Back to Menu</button>
    </div>

    <!-- Invite Friend Modal -->
    <div id="invite-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>Invite Friend</h2>
            <div class="modal-field">
                <label for="invite-friend-name">Friend Name:</label>
                <input type="text" id="invite-friend-name" placeholder="Enter friend's name" />
            </div>
            <div class="modal-field">
                <label for="invite-friend-id">Friend ID (optional):</label>
                <input type="text" id="invite-friend-id" placeholder="Optional peer ID" />
            </div>
            <div class="modal-field">
                <label for="invite-friend-notes">Notes:</label>
                <div id="invite-friend-notes" class="milkdown-editor"></div>
            </div>
            <div class="modal-field">
                <label for="invitation-code">Invitation:</label>
                <div class="invitation-display">
                    <input type="text" id="invitation-code" readonly placeholder="Click Generate to create invitation" />
                    <button id="copy-invitation-btn" class="icon-btn" disabled title="Copy to clipboard">üìã</button>
                </div>
            </div>
            <div class="modal-actions">
                <button id="generate-invite-btn" class="{{buttonClass}}">Generate</button>
                <button id="close-invite-modal-btn" class="{{buttonClass}}">Close</button>
            </div>
        </div>
    </div>

    <!-- Accept Invitation Modal -->
    <div id="accept-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>Accept Invitation</h2>
            <div class="modal-field">
                <label for="accepted-invitation">Invitation Code:</label>
                <input type="text" id="accepted-invitation" placeholder="Paste invitation code here" />
            </div>
            <div class="modal-actions">
                <button id="accept-invite-btn" class="{{buttonClass}}">Accept</button>
                <button id="close-accept-modal-btn" class="{{buttonClass}}">Cancel</button>
            </div>
        </div>
    </div>
</div>