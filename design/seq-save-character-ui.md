# Sequence: Save Character (UI)

**Source Spec:** ui.characters.md, storage.md
**Use Case:** User clicks "Yep" button to save character edits

**Note:** This sequence shows the UI side of saving. For storage internals, see seq-save-character.md (Phase 1).

## Participants

- **User**: Person using the application
- **CharacterEditorView**: Character editor view
- **CharacterSheet**: Embedded sheet renderer
- **CharacterValidation**: Validation logic
- **CharacterStorageService**: Character persistence
- **EventService**: User notifications
- **calculateCharacterHash**: Hash utility

## Sequence

```
       â”Œâ”€â”
       â•‘"â”‚
       â””â”¬â”˜
       â”Œâ”¼â”
        â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”Œâ”´â”            â”‚CharacterEditorViewâ”‚                           â”‚CharacterSheetâ”‚           â”‚CharacterValidationâ”‚                        â”‚EventServiceâ”‚           â”‚CharacterStorageServiceâ”‚          â”‚calculateCharacterHashâ”‚
      User            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ click "Yep" button   â”Œâ”´â”                                            â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ â”‚                                            â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚ â”€â”€â”€â”€â”                                      â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚     â”‚ setupEventListeners()                â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚ <â”€â”€â”€â”˜                                      â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚ â”€â”€â”€â”€â”                                      â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚     â”‚ saveCharacter()                      â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚ <â”€â”€â”€â”˜                                      â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚               getCharacter()               â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚             current character              â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚ <â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                  validateCharacterCreation(character)                  â”Œâ”´â”                                        â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ â”‚                                        â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                           â”‚ â”‚                                        â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                           â”‚ â”‚ â”€â”€â”€â”€â”                                  â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                           â”‚ â”‚     â”‚ validateAttributes()             â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                           â”‚ â”‚ <â”€â”€â”€â”˜                                  â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                           â”‚ â”‚                                        â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                           â”‚ â”‚ â”€â”€â”€â”€â”                                  â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                           â”‚ â”‚     â”‚ validateSkillPrerequisites()     â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                           â”‚ â”‚ <â”€â”€â”€â”˜                                  â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                           â”‚ â”‚                                        â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                           â”‚ â”‚ â”€â”€â”€â”€â”                                  â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                           â”‚ â”‚     â”‚ validateFields()                 â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                           â”‚ â”‚ <â”€â”€â”€â”˜                                  â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                           â””â”¬â”˜                                        â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                errors[]    â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚ <â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚   â•”â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—                â”‚
        â”‚   â•‘ ALT  â”‚  errors.length > 0                                       â”‚                            â”‚                                         â”‚                             â”‚                 â•‘                â”‚
        â”‚   â•Ÿâ”€â”€â”€â”€â”€â”€â”˜           â”‚ â”‚                                            â”‚                            â”‚                                         â”‚                             â”‚                 â•‘                â”‚
        â”‚   â•‘                  â”‚ â”‚ â”€â”€â”€â”€â”                                      â”‚                            â”‚                                         â”‚                             â”‚                 â•‘                â”‚
        â”‚   â•‘                  â”‚ â”‚     â”‚ showValidationWarning(errors)        â”‚                            â”‚                                         â”‚                             â”‚                 â•‘                â”‚
        â”‚   â•‘                  â”‚ â”‚ <â”€â”€â”€â”˜                                      â”‚                            â”‚                                         â”‚                             â”‚                 â•‘                â”‚
        â”‚   â•‘                  â”‚ â”‚                                            â”‚                            â”‚                                         â”‚                             â”‚                 â•‘                â”‚
        â”‚   â•‘                  â”‚ â”‚                                           addEvent(validation-warning)  â”‚                                         â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•—          â•‘                â”‚
        â”‚   â•‘                  â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ â•‘Display warning notification     â–‘â•‘          â•‘                â”‚
        â”‚   â•‘                  â”‚ â”‚                                            â”‚                            â”‚                                         â”‚ â•‘Continue with save (never block)  â•‘          â•‘                â”‚
        â”‚   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                â”‚
        â”‚                      â”‚ â”‚                                            â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                            â”‚                                         â”‚                             â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
        â”‚                      â”‚ â”‚                                            â”‚               saveCharacter(character)                               â”‚                            â”Œâ”´â”â•‘Internal: hash comparison,  â–‘â•‘  â”‚
        â”‚                      â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ â”‚â•‘storage write                â•‘  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                            â”‚                                         â”‚                            â”‚ â”‚â•‘(see seq-save-character.md)  â•‘  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                            â”‚                                         â”‚                            â””â”¬â”˜â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                    saved character                                   â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚ <â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                            â”‚ calculateCharacterHash(saved)           â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
        â”‚                      â”‚ â”‚                                            â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                            â”‚            new hash                     â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚ <â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”‚
        â”‚                      â”‚ â”‚                                            â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚ â”€â”€â”€â”€â”                                      â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚     â”‚ originalCharacterHash = new hash     â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚ <â”€â”€â”€â”˜                                      â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚ â”€â”€â”€â”€â”                           â•”â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—           â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚     â”‚ updateButtonStates()      â•‘hasUnsavedChanges = false â–‘â•‘           â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚ <â”€â”€â”€â”˜                           â•‘Disable Yep/Nope buttons   â•‘           â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                 â•šâ•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•           â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚   â•”â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•—                                     â”‚                             â”‚                                  â”‚
        â”‚   â•‘ OPT  â”‚  world loaded                                            â”‚                            â”‚   â•‘                                     â”‚                             â”‚                                  â”‚
        â”‚   â•Ÿâ”€â”€â”€â”€â”€â”€â”˜           â”‚ â”‚                                            â”‚                            â”‚   â•‘                                     â”‚                             â”‚                                  â”‚
        â”‚   â•‘                  â”‚ â”‚ â”€â”€â”€â”€â”                             â•”â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—       â”‚   â•‘                                     â”‚                             â”‚                                  â”‚
        â”‚   â•‘                  â”‚ â”‚     â”‚ updateWorldCharacter()      â•‘Sync to TextCraft MUD world â–‘â•‘       â”‚   â•‘                                     â”‚                             â”‚                                  â”‚
        â”‚   â•‘                  â”‚ â”‚ <â”€â”€â”€â”˜                             â•šâ•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•       â”‚   â•‘                                     â”‚                             â”‚                                  â”‚
        â”‚   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•                                     â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚ â”€â”€â”€â”€â”                                â•”â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•—                                        â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚     â”‚ show success notification      â•‘Display "Character saved" briefly â–‘â•‘                                        â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚ <â”€â”€â”€â”˜                                â•šâ•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•                                        â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚                      â”‚ â”‚                                            â”‚                            â”‚                                         â”‚                             â”‚                                  â”‚
        â”‚   â•”â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•—                               â”‚                             â”‚                                  â”‚
        â”‚   â•‘ OPT  â”‚  callback provided                                       â”‚                            â”‚         â•‘                               â”‚                             â”‚                                  â”‚
        â”‚   â•Ÿâ”€â”€â”€â”€â”€â”€â”˜           â”‚ â”‚                                            â”‚                            â”‚         â•‘                               â”‚                             â”‚                                  â”‚
        â”‚   â•‘                  â”‚ â”‚ â”€â”€â”€â”€â”                                   â•”â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚         â•‘                               â”‚                             â”‚                                  â”‚
        â”‚   â•‘                  â”‚ â”‚     â”‚ onCharacterSaved?(character)      â•‘Optional callback to parent â–‘â•‘ â”‚         â•‘                               â”‚                             â”‚                                  â”‚
        â”‚   â•‘                  â”‚ â”‚ <â”€â”€â”€â”˜                                   â•šâ•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚         â•‘                               â”‚                             â”‚                                  â”‚
        â”‚   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•                               â”‚                             â”‚                                  â”‚
      User            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â””â”¬â”˜â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”Œâ”€â”            â”‚CharacterEditorViewâ”‚                           â”‚CharacterSheetâ”‚           â”‚CharacterValidationâ”‚                        â”‚EventServiceâ”‚           â”‚CharacterStorageServiceâ”‚          â”‚calculateCharacterHashâ”‚
       â•‘"â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â””â”¬â”˜
       â”Œâ”¼â”
        â”‚
       â”Œâ”´â”
```

## Current Implementation vs Spec

**âœ… Correctly implemented:**
- Validation before save
- Never blocks save due to validation errors
- Shows validation warnings but allows save
- Hash updated after save
- Button states updated
- TextCraft world sync (if applicable)

**âœ… Matches spec (per ui.md):**
- NEVER block saves due to validation errors âœ“
- Show validation warnings âœ“
- Always save data even if invalid âœ“
- Invalid data prevented from use but not from saving âœ“

**âœ… Matches spec (per ui.characters.md):**
- Enable Yep button only when there are unsaved changes âœ“
- Save workflow uses CharacterStorageService âœ“

**ğŸ“ Save workflow (per storage.md):**
The full save workflow is:
1. Load original character from storage â†’ temporary variable
2. Save current (edited) character to storage
3. Replace history object with original from temporary variable
4. Remove any "future" history items
5. Add newly saved character to history
6. Advance internal history for proper back button behavior

(Steps 1-6 handled internally by CharacterEditorView and browser history)

## Notes

- Validation is non-blocking (per ui.md: "never block saves")
- Validation errors shown via EventService notification
- User can save invalid characters (but can't use them in worlds)
- Hash comparison in CharacterStorageService may skip storage write (optimization)
- TextCraft world sync is optional (only if MUD world loaded)
- Button states update immediately after save

## Related CRC Cards

- crc-CharacterEditorView.md
- crc-CharacterSheet.md
- crc-CharacterValidation.md (Phase 1)
- crc-CharacterStorageService.md (Phase 1)

